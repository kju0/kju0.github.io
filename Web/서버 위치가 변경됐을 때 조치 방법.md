- ssl ì¸ì¦ì„œ ë³€ê²½ (nginx)
- ë„ë©”ì¸ ë³€ê²½ í•„ìš”ì‹œ 

### ğŸ‘€ ìƒí™©
- ì™¸ë¶€ì— ìˆë˜ ì„œë²„ê°€ ê°œë°œí™˜ê²½ê³¼ ê°™ì€ LANìœ¼ë¡œ ì´ë™
	- ì´ì œ ê°œë°œí™˜ê²½ì—ì„œ ì„œë²„ëŠ” ì‚¬ì„¤ ipë¡œ í†µì‹ 
- ê¸°ì¡´ ì„œë²„ëŠ” 80, 443í¬íŠ¸ë¥¼ ë‹¤ë¥¸ ì„œë²„ê°€ ì‚¬ìš©í•˜ê³  ìˆì–´ì„œ 80, 443ì´ ì•„ë‹Œ ë‹¤ë¥¸ í¬íŠ¸ë¡œ http, https ìš”ì²­ì„ ë°›ê³  ìˆëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤! â†’ í˜„ìƒ ìœ ì§€
ì„œë²„ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ë©´ì„œ ì›ë˜ ì‚¬ìš©í•˜ë˜ ë„ë©”ì¸ ì´ë¦„ë„ ëª» ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ì²˜ìŒë¶€í„° ë„ë©”ì¸ ì´ë¦„ ì„¸íŒ…, ssl ì ìš©í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤!


ë§Œì•½ ì„œë²„ê°€ ê°œë°œí™˜ê²½ê³¼ ê°™ì€ ip


ì¼ë‹¨ nginx ì—†ì´ ê¸°ë³¸ ì›¹ë§Œ ì˜¬ë ¤ë†“ê² ìŠµë‹ˆë‹¤
- ë„ë©”ì¸ ë‹¤ì‹œ ë°œê¸‰ http://olpemiwafduckdns.org
- apt íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šì€ nginxëŠ” certbotìœ¼ë¡œ ë°”ë¡œ nginx ssl ëª…ë ¹ì–´ ì…ë ¥ ì‹œ ì˜¤ë¥˜ ë‚©ë‹ˆë‹¤! pid ê²½ë¡œ ì§€ì •í•´ì¤˜ì•¼ ë©ë‹ˆë‹¤
- ì˜¤ë¥˜ : ` sudo certbot --nginx -d olpemiwaf.duckdns.org `
- `sudo pkill nginx`
- sudo rm /run/nginx.pid

ì´ì „ì— ì‹¤í–‰í–ˆë˜ ê¸°ì–µì„ ë˜ì§šì–´ ë³´ë©´
Let's Encrypt SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•  ë•Œ http-01 ì±Œë¦°ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.
ì™œëƒ? ì¸ì¦ ê³¼ì •ì—ì„œ 80, 443 ê³µì¸ì•„ì´í”¼ë¡œ ì¸ì¦í•˜ëŠ”ë° ê·¸ê²Œ ë§‰í˜€ìˆê¸° ë•Œë¬¸ì´ì£ ..
ê·¸ë˜ì„œ dns-01 ì±Œë¦°ì§€ë¥¼ ì´ìš©í–ˆìŠµë‹ˆë‹¤.
ë„ë©”ì¸ ì†Œìœ ê¶Œì„ í™•ì¸í•˜ê¸° ìœ„í•´ dnsì— íŠ¹ì • txt ë ˆì½”ë“œë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì´ê±´ ì™œ ë ê¹Œìš”? í 
```shell
# dns-01 ì±Œë¦°ì§€ ëª…ë ¹ì–´
sudo certbot certonly --manual --preferred-challenges dns -d ë„ë©”ì¸ì£¼ì†Œ

# duckdns txt record ë“±ë¡
https://www.duckdns.org/update?domains={domain}.duckdns.org&token={token}&txt={dns_txt}
```


nginx conf ë³€ê²½
```conf
ssl_certificate /etc/letsencrypt/live/ì„œë¸Œë„ë©”ì¸.duckdns.org/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/ì„œë¸Œë„ë©”ì¸.duckdns.org/privkey.pem;
```

í¬íŠ¸ í¬ì›Œë”©í•  ë•Œ í˜ë“¤ì—ˆë˜ ê²ƒ
ë¬´ìˆ˜íˆ ë§ì€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°œìƒ
server {
    listen 1236;
    server_name olpemiwaf.duckdns.org;

    location /prometheus/ {
        proxy_pass http://localhost:9090/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        proxy_redirect / /prometheus/;
    }
}